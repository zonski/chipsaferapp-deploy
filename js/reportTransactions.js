var app,columns,dataFields,report="transaction",filtered=!1,setup={backgroundline:"rgb(255, 153, 153)",populateSelect:function(){},bindActions:function(){$(".report-action").click(function(){switch($(this).data("action")){case"filter":entryUtil.validateFields("#report-filter")&&(reportUtil.tableLoad(!1),dataFields=entryUtil.buildEntryJson("#report-filter"));break;case"clear":reportUtil.clearFilters();break;default:console.log("Report Action UNDEFINED")}}),$("#periodOption").on("change",function(e){setup.renderPeriodDiv($("#periodOption").val())}),$("#tradingType").on("change",function(e){setup.renderCustomerSupplierDiv($("#tradingType").val())})},renderPeriodDiv:function(e){2==e?$("#period-div").removeClass("d-none"):$("#period-div").addClass("d-none")},renderCustomerSupplierDiv:function(e){void 0!==e&&$("#customerSupplier-div").removeClass("d-none"),$("#customerSupplier").empty(),0==e?($("#customerSupplierLabel").html($.t("buyAnimals.supplier")),$("#customerSupplierHeader").html($.t("buyAnimals.supplier")),entryUtil.populateSelect("customerSupplier",["name"],!0,"/getallforbuying/",void 0,void 0,!1,$.t("select.values.all"),!1)):($("#customerSupplierLabel").html($.t("saleAnimals.client")),$("#customerSupplierHeader").html($.t("saleAnimals.client")),1==e?entryUtil.populateSelect("customerSupplier",["name"],!0,"/getallforselling/",void 0,void 0,!1,$.t("select.values.all"),!1):entryUtil.populateSelect("customerSupplier",["name"],!0,"/getallforslaughter/",void 0,void 0,!1,$.t("select.values.all"),!1))},bindTableActions:function(){$(".table-action").click(function(){$(this).data("action"),console.log("Table Action UNDEFINED")})},reportInXlsPDF:function(e){propertyId=localStorage.getItem("property_id"),customerSupplier=$("#customerSupplier").val(),periodOption=$("#periodOption").val(),tradingType=$("#tradingType").val(),window.location=app.api+"api/transactionReport/reportoutput/"+e+"/"+tradingType+"/"+periodOption+"/"+propertyId+"/"+customerSupplier+"/"+app.locale},reportInPDF:function(){app.loadingAdd(),$.ajax({url:app.api+"api/transactionReport/reportoutput/pdf",type:"POST",async:!1,data:dataFields,beforeSend:app.setHeaders}).done(function(e){var t=file.base64ToArrayBuffer(e);file.saveFile($.t("report.transaction.title")+".pdf",t,"pdf")}).fail(function(e){app.ajaxError(e)}).always(function(){app.loadingRemove()})},tableSetup:function(){columns=[{data:"customerName",responsivePriority:1,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"typeCode",responsivePriority:2,render:function(e){switch(e){case 0:return $.t("transaction.fields.buy");case 1:return $.t("transaction.fields.sale");case 2:return $.t("transaction.fields.slaughterSale");default:return"-"}}},{data:"dateTransaction",responsivePriority:3,render:function(e){return e?app.htmlEncode(new Date(e).toLocaleDateString(app.locale)):"-"}},{data:"countAnimals",responsivePriority:4,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"currency.name",responsivePriority:4,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"formattedTotalValue",responsivePriority:5,render:function(e){return e?app.htmlEncode(e):"-"}}]},init:function(e){console.log("reportTransactions.js"),document.title=$.t("report.transaction.title"),app=e,setup.populateSelect(),setup.bindActions(),setup.tableSetup()}};