var app,setup={bindActions:function(){$("[data-action]").click(function(){switch($(this).data("action")){case"send":setup.validateForm();break;default:console.log("Data Action UNDEFINED")}})},validateForm:function(){var a=document.getElementById("password-input").value,n=document.getElementById("confirm-password-input").value;if(a&&n)if(a==n){var o=new URL(window.location.href),e={UserId:o.searchParams.get("userid"),NewPassword:n,TokenHash:o.searchParams.get("tokenhash")};$.ajax({url:app.api+"api/resetpassword/update",type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",statusCode:{200:function(a){app.loadingRemove(),a&&app.notify("success",$.t("notify.success"),$.t("recoverPassword.success"),!1,function(){window.location.href="index.html"})},404:function(){app.loadingRemove(),app.notify("error",$.t("error.warning"),$.t("error.noConnection"),!1,null)}}})}else app.notify("warning",$.t("notify.warning"),$.t("recoverPassword.notEqual"),!1,function(){$("#password-input").focus()})},initializeScreen:function(){var a=new URL(window.location.href),n=a.searchParams.get("userid"),o=a.searchParams.get("tokenhash");if(app.loadingAdd(),null==n&&null==o)window.location.href="index.html";else{var e=function(){window.location.href="index.html"};$.ajax({url:app.api+"api/resetpassword/isTicketValid/"+n+"/"+o,type:"GET",statusCode:{200:function(a){app.loadingRemove(),a?($("#password-input").focus(),$("#password-input").attr("placeholder",$.t("recoverPassword.fields.newPassword")).attr("maxlength",50),$("#confirm-password-input").attr("placeholder",$.t("recoverPassword.fields.confirmPassword")),setup.bindActions()):app.notify("warning",$.t("notify.warning"),$.t("recoverPassword.notActive"),!1,e)},404:function(){app.loadingRemove(),app.notify("error",$.t("error.warning"),$.t("error.noConnection"),!1,null)}}})}},init:function(a){var n=Math.floor(5*Math.random())+1;$(".cover-up").css("background-image","url(../images/bg/wall"+n+".jpg)"),app=a,this.initializeScreen()}};