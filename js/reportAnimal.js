var app,columns,dataFields,report="animal",filtered=!1,filteredDrug=!1,setup={populateSelect:function(){$("#subspecies").on("change",function(e){entryUtil.populateSelect("pelage",["name"],!0,"/getbysubspecies/"+this.value,void 0,void 0,!1,$.t("select.values.all"))}),$("#gender").on("change",function(e){entryUtil.populateSelect("classification",["label"],!0,"/getallbygender/"+this.value,void 0,void 0,!1,$.t("select.values.all"))}),entryUtil.populateSelect("classification",["label"],!0,"/getallbygender/"+$("#gender").val(),void 0,void 0,!1,$.t("select.values.all")),entryUtil.populateSelect("subspecies",["name"],!0,"/getidname/",void 0,void 0,!1,$.t("select.values.all")),entryUtil.populateSelect("animalStatus",["label"],!0,"/getall/true",void 0,void 0,!1,$.t("select.values.all")),entryUtil.populateSelect("lot",["name"],!0,"",void 0,void 0,!1,$.t("select.values.all"))},bindActions:function(){$(".report-action").click(function(){switch($(this).data("action")){case"filter":reportUtil.tableLoad(!1),dataFields=entryUtil.buildEntryJson("#report-filter");break;case"clear":reportUtil.clearFilters();break;default:console.log("Report Action UNDEFINED")}}),$("#classificationType").change(function(){"0"!=$(this).val()?entryUtil.populateSelect("species",["name"],!0,"/classificationTpe/"+$("#classificationType").val()+"/true"):$('[data-combo="species"]').html("")}),$("#species").change(function(){$('input[name="subSpecies"]').val(""),$("#subSpecies").val(""),"0"!=$(this).val()?entryUtil.getAutoCompleteData("subSpecies","",["name"],"/species/"+$("#species").val()+"/true"):$('input[name="subSpecies"]').autocomplete("option","source",[])})},bindTableActions:function(){$(".table-action").click(function(){switch($(this).data("action")){case"animalMovement":$("#animalMovement").modal("show"),$("#id").val($(this).data("id"));break;case"animalWeighing":$("#id").val($(this).data("id")),window.location.href="chartAnimalWeighing.html?id="+$("#id").val();break;default:console.log("Table Action UNDEFINED")}})},reportInXlsPDF:function(e){property=localStorage.getItem("property_id"),gender=$("#gender").val(),classification=$("#classification").val(),deviceOption=$("#deviceOption").val(),subspecie=$("#subspecies").val(),pelage=$("#pelage").val(),animalStatus=$("#animalStatus").val(),lot=$("#lot").val(),dateBirthStart=""==$("#dateBirthStart").val()?null:$("#dateBirthStart").val().replace(/(\/)/g,"-"),dateBirthEnd=""==$("#dateBirthEnd").val()?null:$("#dateBirthEnd").val().replace(/(\/)/g,"-"),dateWeaningStart=""==$("#dateWeaningStart").val()?null:$("#dateWeaningStart").val().replace(/(\/)/g,"-"),dateWeaningEnd=""==$("#dateWeaningEnd").val()?null:$("#dateWeaningEnd").val().replace(/(\/)/g,"-"),window.location=app.api+"api/animalreport/reportoutput/"+e+"/"+gender+"/"+deviceOption+"/"+property+"/"+classification+"/"+subspecie+"/"+pelage+"/"+animalStatus+"/"+lot+"/"+dateBirthStart+"/"+dateBirthEnd+"/"+dateWeaningStart+"/"+dateWeaningEnd+"/"+app.locale},bindModalActions:function(){$("#btn-cancel").click(function(){$("#animalMovement input").val("")}),$("#btn-ok").click(function(){entryUtil.validateFields("#animalMovement")&&(window.location.href="chartAnimalMovement.html?id="+$("#id").val()+"&dateFrom="+$("#dateFrom").val()+"&dateTo="+$("#dateTo").val())})},tableSetup:function(){columns=[{data:"id",responsivePriority:1,visible:!1,render:function(e){return app.htmlEncode(e)}},{data:"nickName",responsivePriority:3,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"device.code",responsivePriority:4,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"gender",responsivePriority:5,render:function(e){return 1===e?$.t("animal.fields.genderMale"):2===e?$.t("animal.fields.genderFemale"):"-"}},{data:"classification.label",responsivePriority:6,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"subSpecies.name",responsivePriority:8,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"pelage.name",responsivePriority:7,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"animalStatus.label",responsivePriority:6,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"lot.name",responsivePriority:12,render:function(e){return e?app.htmlEncode(e):"-"}},{data:"dateBirth",responsivePriority:8,render:function(e){return e?app.htmlEncode(app.getDateTime(e)):"-"}},{data:"dateWeaning",responsivePriority:9,render:function(e){return e?app.htmlEncode(app.getDateTime(e)):"-"}}]},init:function(e){console.log("reportAnimal.js"),document.title=$.t("report.animal.title"),app=e,setup.populateSelect(),setup.bindActions(),setup.tableSetup(),setup.bindModalActions()}};