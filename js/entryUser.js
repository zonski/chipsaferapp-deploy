var app,table,entry="user",setup={profileList:[],languageList:[],bindActions:function(){$(".entry-action").click(function(){switch($(this).data("action")){case"addOpen":render.switchTop(),setup.setCheckBoxAlert();break;case"addCancel":render.switchTop();break;case"submit":entryUtil.validateFields()&&$.when(entryUtil.entryCrud(entry,"submit")).then(function(){var e=$("#id").val(),t=localStorage.getItem("user_id");e==t&&localStorage.setItem("profile_id",$("#profileId").val()),"1"!=localStorage.getItem("profile_id")?(setup.showFieldsByProfile(!0),setTimeout(function(){entryUtil.entryCrud(entry,"get",t)},2e3)):setup.showFieldsByProfile(!1)});break;default:console.log("Entry Action UNDEFINED")}}),$("#viewNotifies").on("change",function(e){setup.setCheckBoxAlert()})},setCheckBoxAlert:function(){0==$("#viewNotifies").is(":checked")?($("#receiveEmailNotifies").prop("checked",!1),$("#receiveEmailNotifies").prop("disabled",!0)):$("#receiveEmailNotifies").prop("disabled",!1)},bindTableActions:function(){$(".table-action").click(function(){switch($(this).data("action")){case"edit":entryUtil.entryCrud(entry,"get",$(this).data("id"));break;default:console.log("Table Action UNDEFINED")}})},tableSetup:function(){var e=[{data:"id",visible:!1,render:function(e){return app.htmlEncode(e)}},{data:"username",render:function(e){return e?app.htmlEncode(e):"-"}},{data:"name",render:function(e){return e?app.htmlEncode(e):"-"}},{data:"profileId",render:function(e){return e?function(e){return setup.profileList.find(function(t){return t.id==parseInt(e)}).name}(app.htmlEncode(e)):"-"}},{data:"email",render:function(e){return e?app.htmlEncode(e):"-"}},{data:"active",render:function(e){return e?$.t("options.active"):$.t("options.inactive")}},{data:null,render:function(e){return render.renderActions(e.id,null,e.locked)}}];entryUtil.tableLoad(e,!1)},populateSelects:function(){$("#profileId").empty().append('<option value="0" disabled selected>'+$.t("user.fields.profile-select")+"</option>"),entryUtil.getJsonData("profile","GET").then(function(e){setup.profileList=e;$(".row-profile").find("select");$.each(setup.profileList,function(e,t){$(".row-profile").find("select").append($("<option>",{value:t.id,text:t.name}))})}),$("#defaultLanguage").empty().append('<option value="0" disabled selected>'+$.t("user.fields.language-select")+"</option>"),entryUtil.getJsonData("language/getall","GET").then(function(e){setup.languageList=e;$(".row-language").find("select");$.each(setup.languageList,function(e,t){$(".row-language").find("select").append($("<option>",{value:t.key,text:t.description}))})})},showFieldsByProfile:function(e){e?($(".main-content__wrapper,.btn-secondary").hide(),$("#active-div").hide(),$("#profile-div").hide()):($(".main-content__wrapper,.btn-secondary").show(),$("#active-div").show(),$("#profile-div").show())},init:function(e){console.log("entryUser.js"),document.title=$.t("user.title"),app=e,setup.populateSelects(),"1"!=localStorage.getItem("profile_id")?(setup.showFieldsByProfile(!0),entryUtil.entryCrud(entry,"get",localStorage.getItem("user_id"))):setup.showFieldsByProfile(!1),setup.tableSetup(),this.bindActions()}};